{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport axios from 'axios';\nimport RenderCard from \"./CardDetailComponent\";\nconst stripePromise = loadStripe('pk_test_51Hh0EWHXCFaKJwPeFxcpLt5Wm7iLZVsIKmPh1ZIzd7ekrqN5mMpUgKeATeZ9GaU9A4zHI9J6nNl3onwWTGQd1egW00b9iowpNO');\n\nconst CheckoutForm = () => {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement)\n    });\n\n    if (!error) {\n      const {\n        id\n      } = paymentMethod;\n\n      try {\n        await axios.post(\"/api/addCard\", {\n          id\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        maxWidth: \"400px\",\n        margin: \"0 auto\"\n      },\n      children: [/*#__PURE__*/_jsx(CardElement, {}), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\",\n        disabled: !stripe,\n        children: \"Save\"\n      })]\n    })\n  });\n};\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getCardDetails\", async () => {\n      try {\n        const {\n          data\n        } = await axios.post(\"/api/listCards\");\n        this.setState({\n          creditCards: data\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.state = {\n      creditCards: null\n    };\n    this.getCardDetails = this.getCardDetails.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"button\", {\n        onClick: this.getCardDetails,\n        children: \"List Credit Cards\"\n      }), /*#__PURE__*/_jsx(RenderCard, {\n        creditCards: this.state.creditCards\n      }), /*#__PURE__*/_jsx(Elements, {\n        stripe: stripePromise,\n        children: /*#__PURE__*/_jsx(CheckoutForm, {})\n      })]\n    });\n  }\n\n}\n\nexport default Main;","map":null,"metadata":{},"sourceType":"module"}